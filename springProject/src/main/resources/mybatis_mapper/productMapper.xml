<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.group3.springProject.mapper.ProductMapper">
	<resultMap type="Product" id="ProductMap">
	<id column="prod_id" property="prod_id"/>
	<result column="prod_name" property="prod_name"/>
	<result column="prod_price" property="prod_price"/>
	<result column="prod_stock" property="prod_stock"/>
	<result column="category_code" property="category_code"/>
	<result column="prod_img" property="prod_img"/>
	<result column="division_code" property="division_code"/>
	<result column="good" property="good"/>
	<result column="shipping_id" property="shipping_id"/>
	</resultMap>
	<select id="selectAll" resultType="Product">
		SELECT * FROM PRODUCT 
		<if test="search != null">
			WHERE prod_name LIKE CONCAT('%', #{search}, '%')
		</if>
		<if test="sort != null">
			ORDER BY ${sort} 
		</if>
		<if test="direct != null">
			<choose>
				<when test="direct.equals('desc')">desc</when>
				<otherwise>asc</otherwise>
			</choose>
		</if>
		LIMIT #{startRow}, #{row}
	</select>
	<select id="selectAllCount" resultType="int">
		SELECT COUNT(*) FROM PRODUCT
		<if test="search != null">
			WHERE prod_name LIKE CONCAT('%', #{search}, '%')
		</if>
		<if test="sort != null">
			ORDER BY ${sort} 
		</if>
		<if test="direct != null">
			<choose>
				<when test="direct.equals('desc')">desc</when>
				<otherwise>asc</otherwise>
			</choose>
		</if>
	</select>
	<select id="selectFindOne" resultMap="ProductMap">
		SELECT * FROM PRODUCT WHERE prod_id=#{prodId}
	</select>
</mapper>